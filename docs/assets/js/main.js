"use strict";const formElement=document.querySelector(".js-form"),btnElement=document.querySelector(".js-searchBtn"),inputElement=document.querySelector(".js-searchInput"),resultsElement=document.querySelector(".js-results"),favoritesListElement=document.querySelector(".js-favoritesList");let shows=[],favoriteShows=[];function callToApi(e){fetch("http://api.tvmaze.com/search/shows?q="+e).then(e=>e.json()).then(e=>{shows=e,renderResult(e)})}function renderResult(){let e="";for(const o of shows){const n=o.show,s=n.name,i=n.id;let r=n.image;function t(){let e="";return e=null===n.image?"https://via.placeholder.com/210x295/ffffff/666666/?\n            text=TV":""+r.medium,e}e+=`<li class="resultList--item js-show ${isFavoriteShow(o)?"show--favorite":""}" id="${i}">`,e+=`<img src="${t()}" alt="${s} poster">`,e+=`<p>${s}</p>`,e+="</li>"}resultsElement.innerHTML=e,listenShowsEvents()}function isFavoriteShow(e){return!!favoriteShows.find(t=>t.show.id===e.show.id)}function handleForm(e){e.preventDefault(),console.log("No hago submit.")}function handleSubmitButton(){callToApi(inputElement.value)}function listenShowsEvents(){const e=document.querySelectorAll(".js-show");for(const t of e)t.addEventListener("click",handleShow)}function handleShow(e){const t=e.currentTarget.id,o=shows;for(const e of o){if(""+e.show.id===t){function n(){console.log("es favorita o no");const o=favoriteShows.findIndex(e=>e.show.id===parseInt(t));-1===o?favoriteShows.push(e):favoriteShows.splice(o,1),console.log(o)}console.log("te encontr√©"),n()}}saveLocalFavorites(),console.log(favoriteShows),renderResult(),paintFavorites()}function saveLocalFavorites(){const e=JSON.stringify(favoriteShows);localStorage.setItem("showFavorites",e)}function getFromLocalStorage(){console.log("hola");const e=localStorage.getItem("showFavorites");if(e){const t=JSON.parse(e);favoriteShows=t,paintFavorites()}}function paintFavorites(){let e="";for(const o of favoriteShows){const n=o.show,s=n.name,i=n.id;let r=n.image;function t(){let e="";return e=null===n.image?"https://via.placeholder.com/210x295/ffffff/666666/?\n            text=TV":""+r.medium,e}e+=`<li id="${i}">`,e+=`<img src="${t()}" alt="${s} poster">`,e+=`<p>${s}</p>`,e+="</li>"}favoritesListElement.innerHTML=e}formElement.addEventListener("submit",handleForm),btnElement.addEventListener("click",handleSubmitButton),getFromLocalStorage();